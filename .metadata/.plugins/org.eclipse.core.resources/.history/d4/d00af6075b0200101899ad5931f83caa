package com.project.service;

import java.util.Map;
import java.util.Optional;

import org.hibernate.result.Output;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.project.entity.Muser;
import com.project.entity.TUserRole;
import com.project.pojo.OutputResponse;
import com.project.pojo.RegisterUserDetails;
import com.project.repository.MUserRepo;
import com.project.repository.TUserProfileRepo;

@Service 
public class PublicService {

	
	@Autowired
	private MUserRepo mUserRepo;
	@Autowired
	private TUserProfileRepo tUserProfileRepo;
	@Autowired
	private TUserRole tUserRole;
	
	
	private final String FAIL = "fail";
	
	public void registerUser(RegisterUserDetails entity) {
		OutputResponse outputResponse = new OutputResponse();
		Optional<Muser>mUserCheck = mUserRepo.findByUsernameAndEmail(entity.getUserName().trim(), entity.getEmail().trim());
		if(mUserCheck.isPresent()) {
			outputResponse.setStatus(FAIL);
			outputResponse.setOutput("UserName and Email is already present, Please try with other UserName and Email.");
		}else {
			Muser muser = new Muser();
			
			muser.setUsername(entity.getUserName());
			muser.setEmail(entity.getEmail());
			muser.setCreatedAt(null);
			
			mUserRepo.save(muser);
		}
		
		
		
		
		
		
		
	}

}
